package singleton.singleton2;


class DBmodule{
	private String name;
	
	//Lazy instantiation
	static DBmodule staticoObj;
	
	private DBmodule() {
		System.out.println("creating instance");
	}
	
	//multiple threads accessing this method will cause failure of singleton
	public static DBmodule getInstance() {
		//Lazy instantiation
		if(staticoObj==null) {
			staticoObj = new DBmodule();
		}
		return staticoObj;
	}
	
}

public class SingletonLazy {
	static void normalCase() {
		DBmodule myGod = DBmodule.getInstance();
		
		DBmodule yourGod = DBmodule.getInstance();
	}
	
	static void multithreadedCase() {
		Thread t1 = new Thread(()->{DBmodule myGod = DBmodule.getInstance();});
		Thread t2 = new Thread(()->{DBmodule yourGod = DBmodule.getInstance();});
		
		t1.start();
		t2.start();	
	}
	
	public static void main(String[] args) {
//		normalCase();
		multithreadedCase();
	}

}
